<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Hanu-Cordbot Admin</title>
<style>
 body{font-family:system-ui;padding:2rem;max-width:600px;margin:auto}
 input,button{font-size:1rem;padding:.5rem} button{cursor:pointer}
 pre{white-space:pre-wrap;border:1px solid #bbb;padding:1rem;margin-top:1rem;
     font-family:ui-monospace,monospace;background:#f9f9f9}
</style>
</head><body>
<h2>Hanu-Cordbot – Manual Run</h2>

<label>AUTH_TOKEN:
 <input id="tok" type="password" size="44"
        placeholder="paste once; stored only in this tab">
</label>
<button id="run">▶︎ Run</button>

<pre id="log">Paste the token, then click Run…</pre>

<script>
const WORKER_URL = "https://hanu-cordbot.snacky496.workers.dev/run";
const tok = document.getElementById("tok");
const log = document.getElementById("log");

/* restore token for this tab */
tok.value = sessionStorage.getItem("AUTH_TOKEN") || "";

document.getElementById("run").onclick = async () => {
  if (!tok.value.trim()) { alert("Paste the token first"); return; }
  sessionStorage.setItem("AUTH_TOKEN", tok.value.trim());

  log.textContent = "⏳ Calling the Worker…";
  try {
    const res  = await fetch(WORKER_URL, {
      headers: { Authorization: `Bearer ${tok.value.trim()}` }
    });
    const text = await res.text();
    log.textContent = `HTTP ${res.status}\n\n${text.replace(/\\n/g,"\n")}`;
  } catch (err) {
    log.textContent = "⚠️ " + err;
  }
};
</script>
</body></html>
